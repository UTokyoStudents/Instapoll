# 旧システムにおける投票券の配布（仕様書）

これには新システムの樣な高い不正不可能性は無いが，最低限の安全性を担保している．

## 用意するもの/しくみ

- 投票券の PDF ファイルが入ったクラス毎の出力用のディレクトリ：`tickets/<class name>-<class random token>/XXX.pdf` (XXX は通し番号) (ひとつにつき1名用の投票券)
- 発行作業をするときには排他ロックを使用し，操作の衝突を避けることが望ましい．
- これらのファイルは当然**システムを経由せずにアクセス可能であってはならない**．

## 各部

### 自治委員への配布

`https://.../class-ditrib/?class=<class name>-<class random token>` というリンクを各自治委員にメールする．

これにアクセスすると，ファイル数分のメールアドレス入力欄が現れる．

### 自治委員によるクラスへの配布

メールアドレスを入力し送信すると，各クラスのファイルは `public-tickets/XXX-<ticket random token>.pdf` に移動し，入力欄は減少する．`<ticket random token>` は各ファイル毎に異なる．

それと共に，入力した先にそれぞれ `https://.../public-tickets/XXX-<ticket random token>.pdf` などというリンクがメールされる．これは投票券への直リンクである．
