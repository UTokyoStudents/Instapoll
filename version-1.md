# Version 1

## 前提
- オフライン時は投票券の投票する部分を千切り回収する．選管がQRコードを読み取り，<kbd>投票を記録する</kbd>ボタンを押す．この際に誰の票であるかなどは知る必要が無い．
- オンライン時は投票券の投票する部分のQRコードを有権者が読み取り，<kbd>投票を記録する</kbd>ボタンを押す．
- 1セットの投票券のうち，最初に投票されたものだけが有効であり，1セットからどれかの投票を記録するとそれ以降の同じ投票券の使用は受け付けない．
- このスキームはボルダルールをサポートする．ボルダルール採用時には，各投票につき((選択肢数)-1)セットの投票券を使う．それぞれ，1位に投票する選択肢，2位に投票する選択肢，……である．3名の候補者が居る選挙の場合，各有権者が1位と2位に支持する候補をそれぞれ投票する．ここで，ボルダルールの数理的特性が無効にならないためにいくつかの条件を満さねばならない：
  - ある投票のいづれかの順位に白票(またはその他の無効票)が投ぜられた場合，その有権者のその投票は1セットすべて無効になる．これはつまり有権者はすべての順位を指定しないといけないということである．e.g. つまり，3名の立候補者が居る選挙の場合，有権者は1位として投票する候補，2位として投票する候補をそれぞれ投票せねばならず，どれかが無効だとその投票が無効になる．
  - ある投票の特定の順位に複数の選択肢を同時に投票することは，同じ投票券の重複使用にあたるため防がれる．e.g. 1位の候補として複数を挙げることはできない．
  - ある投票の複数の異なる順位で同じ選択肢が複数回選ばれた場合，その投票は1セットすべて無効になる．e.g. 1位と2位で同じ候補に投票することはできない．
  - 3名の候補が居る選挙の場合，1位に投票すると2点，2位に投票すると1点，選ばれていない候補が3位なので0点が与えられる．他の人数の場合も同様にして得点が決まる．

## 使用するもの
- ED25519 電子署名．1公開鍵対は1つの投票の1有権者でのみ用いられ，再利用されない．ボルダルールの1セットの投票では各有権者でそれぞれ同じものが使われる．1回の選挙で複数の投票を行う場合，同じ有権者でもそれぞれの投票ごとに別の公開鍵が用いられる．
- それぞれにつき選択肢数+1(白票)個の QRコードが書かれた投票券．各有権者に1の投票につき1つ配られる．
- 投票記録用 Web サイト．ここのアドレスが QRコード生成に使われる．

## 署名
これが票である．

```
+------------------------+
| public key (32 Bytes)  |
+------------------------+
| signature (32 Bytes)   |
+------------------------+
| option UUID (16 Bytes) |
+------------------------+
| preference (2 Bytes)   | --- 1, 2, 3, ... (rank)
+------------------------+
```

- 白票の option UUID は，**NULL UUID** である．

